# Draw.io 아키텍처 다이어그램 사용법

## 📋 개요

이 프로젝트에는 AWS 인프라 아키텍처를 시각화한 두 개의 Draw.io 다이어그램이 포함되어 있습니다:

1. **aws-architecture.drawio** - 상세한 아키텍처 다이어그램
2. **aws-architecture-simple.drawio** - 간단한 아키텍처 다이어그램

## 🏗️ 아키텍처 구성 요소

### 새로운 아키텍처 (EC2 기반)

```
CloudFront (CDN) → S3 (정적 파일) + ALB (API) → EC2 (Spring Boot) → RDS MySQL
                                                      ↓
                                                CloudWatch (모니터링)
```

#### 구성 요소 설명

- **CloudFront**: React 정적 파일(JS, CSS, 이미지) 캐싱 및 전송
- **S3**: 정적 리소스(React 빌드 파일, 이미지, 문서) 저장
- **ALB**: HTTP/HTTPS 트래픽을 여러 서버로 분산, SSL 인증서 관리
- **EC2**: 백엔드 API 실행 (비즈니스 로직 처리)
- **RDS**: 사용자, 게시글, 주식 데이터 등 저장
- **VPC + Security Group**: 네트워크 격리 및 포트 접근 제어

## 📁 파일 구조

```
down/
├── aws-architecture.drawio          # 상세한 아키텍처 다이어그램
├── aws-architecture-simple.drawio   # 간단한 아키텍처 다이어그램
└── drawio-usage.md                  # 이 파일
```

## 🔧 Draw.io 사용법

### 1. 온라인에서 열기

1. [draw.io](https://app.diagrams.net/) 접속
2. "Open Existing Diagram" 클릭
3. 파일 선택 또는 드래그 앤 드롭

### 2. VS Code에서 열기

1. VS Code에서 Draw.io Integration 확장 설치
2. `.drawio` 파일을 더블클릭하여 편집

### 3. 데스크톱 앱 사용

1. [Draw.io Desktop](https://github.com/jgraph/drawio-desktop/releases) 다운로드
2. 설치 후 파일 열기

## 🎨 다이어그램 편집

### 색상 코드

- **CloudFront**: 파란색 (#dae8fc)
- **S3**: 초록색 (#d5e8d4)
- **ALB**: 노란색 (#fff2cc)
- **EC2**: 빨간색 (#f8cecc)
- **RDS**: 보라색 (#e1d5e7)

- **CloudWatch**: 회색 (#f5f5f5)

### 도형 스타일

- **서비스**: 둥근 모서리 사각형
- **네트워크**: 점선 사각형 (VPC)
- **연결**: 화살표

## 📊 다이어그램 업데이트

### 아키텍처 변경 시

1. **새로운 서비스 추가**:
   - 적절한 색상과 도형 선택
   - 기존 연결 관계 고려하여 배치

2. **기존 서비스 수정**:
   - 서비스명과 설명 업데이트
   - 연결 관계 재조정

3. **서비스 제거**:
   - 관련 연결선 제거
   - 레이아웃 재조정

### 버전 관리

- 변경사항이 있을 때마다 커밋
- 주요 변경사항은 커밋 메시지에 명시
- 필요시 이전 버전 백업

## 🔄 아키텍처 변경 히스토리

### v2.0 (현재)
- **ECS → EC2**: 컨테이너 오케스트레이션에서 EC2 인스턴스로 변경
- **S3 추가**: 정적 파일 저장용 S3 버킷 추가
- **CloudFront 업데이트**: S3와 ALB를 모두 origin으로 사용
- **비용 최적화**: 월 $75 절약 (ECS Fargate → EC2 t3.medium)

### v1.0 (이전)
- ECS Fargate 기반 아키텍처
- DynamoDB 사용
- 복잡한 컨테이너 오케스트레이션

## 📝 다이어그램 작성 가이드라인

### 1. 명확성
- 서비스명과 역할을 명확히 표시
- 연결 관계를 직관적으로 표현
- 적절한 색상과 도형 사용

### 2. 일관성
- 동일한 서비스는 동일한 색상 사용
- 연결선 스타일 통일
- 텍스트 크기와 폰트 일관성 유지

### 3. 간결성
- 불필요한 정보 제거
- 핵심 구성 요소만 표시
- 복잡한 세부사항은 별도 문서로 분리

## 🚀 배포 시 고려사항

### 다이어그램 활용

1. **팀 협업**: 아키텍처 이해 공유
2. **문서화**: 시스템 구조 문서화
3. **온보딩**: 신규 팀원 교육 자료
4. **설계 검토**: 아키텍처 설계 검토

### 유지보수

- 정기적인 다이어그램 업데이트
- 실제 인프라와 동기화 유지
- 변경사항 즉시 반영

## 📞 지원

다이어그램 관련 문의사항이 있으면:

1. 이 문서 참조
2. Draw.io 공식 문서 확인
3. 팀 내 아키텍처 담당자 문의

---

**참고**: 이 다이어그램은 Terraform 코드와 함께 관리되며, 실제 인프라와 일치하도록 유지됩니다.
